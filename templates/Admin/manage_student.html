<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            min-height: 100vh;
        }
        .sidebar {
            min-width: 220px;
            max-width: 220px;
            background-color: #343a40;
            color: white;
            height: 100vh;
        }
        .sidebar a {
            color: white;
            text-decoration: none;
        }
        .sidebar a:hover {
            background-color: #495057;
        }
        .content {
            padding: 20px;
            flex-grow: 1;
        }
    </style>
</head>
<body>
<div class="d-flex">
    <div class="sidebar d-flex flex-column p-3">
    <h4 class="text-center">Manage Student</h4>
    <hr>
     <ul class="nav nav-pills flex-column mb-auto">
            <li><a href="{{ url_for('admin_dashboard') }}" class="nav-link text-white">Dashboard</a></li>
            <li><a href="{{ url_for('admin_courses') }}" class="nav-link text-white">Courses</a></li>
            <li><a href="{{ url_for('admin_students') }}" class="nav-link text-white">Manage Students</a></li>
            <li><a href="{{ url_for('admin_faculty') }}" class="nav-link text-white">Faculty Management</a></li>
            <li><a href="{{ url_for('assign_courses') }}" class="nav-link text-white">course assign</a></li>
            <li><a href="{{ url_for('admin_logout') }}" class="nav-link text-white">Logout</a></li>
        </ul>
</div>

    <div class="content">
         <div class="mt-3 text-center">
          <a href="{{ url_for('register_student') }}" class="btn btn-success">➕ Register New Student</a>
        </div>
       <div class="card-body">
        <div class="table-responsive glass-table p-3">
  <table class="table align-middle mb-0 text-white">
    <thead class="text-white" style="background: rgba(0,0,0,0.6);">
      <tr>
        <th>Image</th>
        <th>Enrollment ID</th>
        <th>Full Name</th>
        <th>Email</th>
        <th>Class</th>
        <th>Contact</th>
        <th>Password</th>
        <th>Date Registered</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for student in students %}
      <tr style="backdrop-filter: blur(8px); background: rgba(255, 255, 255, 0.1); border-radius: 15px; margin-bottom: 5px;">
        <td>
          <img src="{{ url_for('static', filename='uploads/' ~ student.image) }}"
               alt="student"
               class="rounded-circle border border-light"
               width="50"
               height="50" />
        </td>
        <td>{{ student.enrollment_id }}</td>
        <td>{{ student.full_name }}</td>
        <td>{{ student.email }}</td>
        <td>{{ student.class_applying_for }}</td>
        <td>{{ student.contact_number }}</td>
        <td>
          <span class="badge bg-warning text-dark">{{ student.password }}</span>
        </td>
        <td>{{ student.created_at.strftime('%Y-%m-%d %H:%M') if student.created_at else '' }}</td>
        <td>
          <!-- Edit button -->
          <a href="{{ url_for('edit_student', student_id=student._id) }}" class="btn btn-sm btn-outline-primary mb-1">✏ Edit</a>

          <!-- Delete button -->
          <a href="{{ url_for('delete_student', student_id=student._id) }}" class="btn btn-sm btn-outline-danger mb-1">🗑 Delete</a>

          <!-- Send Email button -->
          <form method="POST" action="{{ url_for('send_email_modal', student_id=student._id) }}" style="display:inline;">
            <input type="hidden" name="email" value="{{ student.email }}">
            <button type="submit" class="btn btn-sm btn-outline-info ms-1 mb-1">📧 Send Email</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="9" class="text-center text-muted">No students registered yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

      </div> 
</div>
</body>
</html>
