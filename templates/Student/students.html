<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Students List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    /* Background gradient */
    body {
      background: linear-gradient(135deg, #74ebd5 0%, #9face6 100%);
      min-height: 100vh;
      font-family: "Poppins", sans-serif;
    }

     .glass-table {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  }

  .glass-table tbody tr:hover {
    background: rgba(255, 255, 255, 0.25);
    transition: 0.3s ease-in-out;
  }

  .glass-table th, .glass-table td {
    vertical-align: middle;
    text-align: center;
  }

    .card-header {
      border-radius: 20px 20px 0 0 !important;
    }
  </style>
</head>
<body>
  <div class="container my-5">
    <div class="card glass-card shadow-lg">
      <div class="card-header bg-success text-white text-center">
        <h3>👩‍🎓 Registered Students</h3>
      </div>
      
        <div class="mt-3 text-center">
          <a href="{{ url_for('register_student') }}" class="btn btn-success">➕ Register New Student</a>
        </div>
      <div class="card-body">
        <div class="table-responsive glass-table p-3">
  <table class="table align-middle mb-0 text-white">
    <thead class="text-white" style="background: rgba(0,0,0,0.6);">
      <tr>
        <th>Image</th>
        <th>Enrollment ID</th>
        <th>Full Name</th>
        <th>Email</th>
        <th>Class</th>
        <th>Contact</th>
        <th>Password</th>
        <th>Date Registered</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for student in students %}
      <tr style="backdrop-filter: blur(8px); background: rgba(255, 255, 255, 0.1); border-radius: 15px; margin-bottom: 5px;">
        <td>
          <img src="{{ url_for('static', filename='uploads/' ~ student.image) }}"
               alt="student"
               class="rounded-circle border border-light"
               width="50"
               height="50" />
        </td>
        <td>{{ student.enrollment_id }}</td>
        <td>{{ student.full_name }}</td>
        <td>{{ student.email }}</td>
        <td>{{ student.class_applying_for }}</td>
        <td>{{ student.contact_number }}</td>
        <td>
          <span class="badge bg-warning text-dark">{{ student.password }}</span>
        </td>
        <td>{{ student.created_at.strftime('%Y-%m-%d %H:%M') if student.created_at else '' }}</td>
        <td>
          <!-- Edit button -->
          <a href="{{ url_for('edit_student', student_id=student._id) }}" class="btn btn-sm btn-outline-primary mb-1">✏ Edit</a>

          <!-- Delete button -->
          <a href="{{ url_for('delete_student', student_id=student._id) }}" class="btn btn-sm btn-outline-danger mb-1">🗑 Delete</a>

          <!-- Send Email button -->
          <form method="POST" action="{{ url_for('send_email_modal', student_id=student._id) }}" style="display:inline;">
            <input type="hidden" name="email" value="{{ student.email }}">
            <button type="submit" class="btn btn-sm btn-outline-info ms-1 mb-1">📧 Send Email</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="9" class="text-center text-muted">No students registered yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
